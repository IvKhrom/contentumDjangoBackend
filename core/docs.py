# docs.py
from drf_yasg import openapi
from drf_yasg.utils import swagger_auto_schema
from rest_framework import status

swagger_description = """
Contentum ‚Äî MVP backend –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ —á–∞—Ç-–ø–æ–¥—Ö–æ–¥.

–ö—Ä–∞—Ç–∫–æ: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è, —Å–æ–∑–¥–∞—é—Ç —á–∞—Ç ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ —à–∞–≥–∞–º (–∏–∑ '–ü–∞—Ä–∞–º–µ—Ç—Ä—ã+–ø—Ä–æ–º–ø—Ç.docx'),
–Ω–∞ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –≤—ã–¥–∞—ë—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å, –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å–æ–±–∏—Ä–∞—é—Ç—Å—è PromptParameters –∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è assembled_prompt –ø–æ —à–∞–±–ª–æ–Ω—É.
–î–∞–ª–µ–µ ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω—é—é –º–æ–¥–µ–ª—å (–≤ MVP —Å–∏–º—É–ª—è—Ü–∏—è, –ø–æ–∑–∂–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kandinsky), —Å –ø—Ä–æ—Å—Ç—ã–º quality-check –∏ retry —Å –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–∞—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ß–∞—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º, –∫–æ–≥–¥–∞ –ø—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ —à–∞–≥–∏ flow
- –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–π —á–∞—Ç –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å –µ–≥–æ

–ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
- POST /api/users/ ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- POST /api/auth/login/ ‚Äî JWT (access/refresh)
- GET/POST /api/chats/ ‚Äî —Å–ø–∏—Å–æ–∫/—Å–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç–æ–≤ (–ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–µ—Ä–≤—ã–π SYSTEM –≤–æ–ø—Ä–æ—Å)
- GET /api/chats/unfinished/ ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ —á–∞—Ç–∞
- POST /api/messages/ ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è; –Ω–∞ USER –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π SYSTEM –≤–æ–ø—Ä–æ—Å –∏–ª–∏ ids —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- CRUD /api/promptparameters/, /api/prompttemplates/
- POST /api/promptactions/assemble/ ‚Äî —Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–º–ø—Ç
- POST /api/promptactions/generate/ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (MVP —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è)

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP:
- Gigachat (–æ–±–æ–≥–∞—â–µ–Ω–∏–µ) ‚Äî –∑–∞–≥–ª—É—à–∫–∞; —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è.
- Kandinsky (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è) ‚Äî –∑–∞–≥–ª—É—à–∫–∞; —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è.

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ frontend:
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —á–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å /api/chats/unfinished/
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —á–∞—Ç–∞ –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –∏ –ø–æ–∫–∞–∑–∞—Ç—å SYSTEM —Å–æ–æ–±—â–µ–Ω–∏–µ.
- –ü–æ—Å–ª–µ POST /api/messages/ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å returned system_message (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ show finished flow.
"""

# –ë–∞–∑–æ–≤—ã–µ —Å—Ö–µ–º—ã –æ—Ç–≤–µ—Ç–æ–≤
success_response_schema = openapi.Schema(
    type=openapi.TYPE_OBJECT,
    properties={
        'status': openapi.Schema(type=openapi.TYPE_STRING, example='success'),
        'message': openapi.Schema(type=openapi.TYPE_STRING),
        'data': openapi.Schema(type=openapi.TYPE_OBJECT)
    }
)

error_response_schema = openapi.Schema(
    type=openapi.TYPE_OBJECT,
    properties={
        'status': openapi.Schema(type=openapi.TYPE_STRING, example='error'),
        'message': openapi.Schema(type=openapi.TYPE_STRING)
    }
)

# =============================================================================
# USER SCHEMAS
# =============================================================================

user_create_schema = swagger_auto_schema(
    operation_description="""
# üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Ä–æ–ª—å EMPLOYEE
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–∞
- –•—ç—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É
- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
- –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –ø–∞—Ä–æ–ª–µ–º
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        required=['email', 'fullName', 'password', 'passwordConfirm'],
        properties={
            'email': openapi.Schema(type=openapi.TYPE_STRING, description='Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è', example='ivan@example.com'),
            'fullName': openapi.Schema(type=openapi.TYPE_STRING, description='–ü–æ–ª–Ω–æ–µ –∏–º—è', example='–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤'),
            'password': openapi.Schema(type=openapi.TYPE_STRING, description='–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 8 —Å–∏–º–≤–æ–ª–æ–≤)', example='securePassword123'),
            'passwordConfirm': openapi.Schema(type=openapi.TYPE_STRING, description='–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è', example='securePassword123'),
        }
    ),
    responses={
        status.HTTP_201_CREATED: openapi.Response('‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω', success_response_schema),
        status.HTTP_400_BAD_REQUEST: openapi.Response('‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', error_response_schema)
    }
)

user_login_schema = swagger_auto_schema(
    operation_description="""
# üîê –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç email –∏ –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT access –∏ refresh —Ç–æ–∫–µ–Ω—ã
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –≤–º–µ—Å—Ç–µ —Å —Ç–æ–∫–µ–Ω–∞–º–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º—É
- –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –¥–æ—Å—Ç—É–ø–∞

**–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- Access —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 60 –º–∏–Ω—É—Ç
- Refresh —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤—É–µ—Ç 7 –¥–Ω–µ–π
- –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º endpoint'–∞–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ access —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization: Bearer <token>
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        required=['email', 'password'],
        properties={
            'email': openapi.Schema(type=openapi.TYPE_STRING, example='ivan@example.com'),
            'password': openapi.Schema(type=openapi.TYPE_STRING, example='securePassword123'),
        }
    ),
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', openapi.Schema(
            type=openapi.TYPE_OBJECT,
            properties={
                'access': openapi.Schema(type=openapi.TYPE_STRING, description='JWT access —Ç–æ–∫–µ–Ω'),
                'refresh': openapi.Schema(type=openapi.TYPE_STRING, description='JWT refresh —Ç–æ–∫–µ–Ω'),
                'user': openapi.Schema(type=openapi.TYPE_OBJECT, description='–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ')
            }
        )),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ', error_response_schema)
    }
)

user_me_schema = swagger_auto_schema(
    operation_description="""
# üë§ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç email, –∏–º—è, —Ä–æ–ª—å –∏ —Å—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–∏

**–¢—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- –ù–µ–æ–±—Ö–æ–¥–∏–º –≤–∞–ª–∏–¥–Ω—ã–π JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', error_response_schema)
    }
)

user_summary_schema = swagger_auto_schema(
    operation_description="""
# üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–¥–∫–∏ –ø–æ —á–∞—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —á–∞—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—á–∏—Ç–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Ç–æ–≤, –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –ø–æ–∫–∞–∑–∞ –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ —á–∞—Ç–∞–º
- –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- total_chats - –≤—Å–µ–≥–æ —á–∞—Ç–æ–≤
- completed_chats - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤  
- active_chats - –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤
- total_messages - –≤—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', error_response_schema)
    }
)

# =============================================================================
# CHAT SCHEMAS
# =============================================================================

chat_list_schema = swagger_auto_schema(
    operation_description="""
# üí¨ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —á–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–∞—Ç—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ —á–∞—Ç–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- –î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ —á–∞—Ç–∞–º–∏
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫:**
- –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ isActive, createdAt, updatedAt
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —á–∞—Ç–∞, email –∏ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –Ω–∞–∑–≤–∞–Ω–∏—é
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', error_response_schema)
    }
)

chat_create_schema = swagger_auto_schema(
    operation_description="""
# üÜï –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–∞–µ—Ç –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
- –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚ùó –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–∞—Ç
- –°–∏—Å—Ç–µ–º–∞ —Å—Ä–∞–∑—É –∑–∞–¥–∞–µ—Ç –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –æ —Ç–∏–ø–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏
- –ß–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ "–ß–∞—Ç ‚ÑñX"
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        properties={
            'title': openapi.Schema(type=openapi.TYPE_STRING, description='–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)', example='–ú–æ–π —á–∞—Ç'),
            'initialMessage': openapi.Schema(type=openapi.TYPE_STRING, description='–ü–µ—Ä–≤–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)', example='–ü—Ä–∏–≤–µ—Ç, —Ö–æ—á—É —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç'),
        }
    ),
    responses={
        status.HTTP_201_CREATED: openapi.Response('‚úÖ –ß–∞—Ç —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–¥–∞–Ω –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å', success_response_schema),
        status.HTTP_400_BAD_REQUEST: openapi.Response('‚ùå –û—à–∏–±–∫–∞ / –µ—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —á–∞—Ç', error_response_schema)
    }
)

chat_unfinished_schema = swagger_auto_schema(
    operation_description="""
# üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ —á–∞—Ç–∞
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–∞—Ç
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–∞—Ç–∞, –µ—Å–ª–∏ –æ–Ω –Ω–∞–π–¥–µ–Ω
- –ü–æ–º–æ–≥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –º–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
- –î–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –¥–∏–∞–ª–æ–≥

**–ß—Ç–æ —Ç–∞–∫–æ–µ –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —á–∞—Ç:**
- –ß–∞—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ –ø—Ä–æ–π–¥–µ–Ω—ã –≤—Å–µ —à–∞–≥–∏ –æ–ø—Ä–æ—Å–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—Ç–∏–ª –Ω–µ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Å–∏—Å—Ç–µ–º—ã
- Flow –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ —Å–æ–±—Ä–∞–Ω—ã
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏', openapi.Schema(
            type=openapi.TYPE_OBJECT,
            properties={
                'status': openapi.Schema(type=openapi.TYPE_STRING),
                'message': openapi.Schema(type=openapi.TYPE_STRING),
                'data': openapi.Schema(
                    type=openapi.TYPE_OBJECT,
                    nullable=True,
                    description='–î–∞–Ω–Ω—ã–µ —á–∞—Ç–∞ –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π, –∏–Ω–∞—á–µ null'
                )
            }
        ))
    }
)

chat_messages_schema = swagger_auto_schema(
    operation_description="""
# üí≠ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —á–∞—Ç–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏ —Å —Å–∏—Å—Ç–µ–º–æ–π
- –í–∫–ª—é—á–∞–µ—Ç –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ, —Ç–∞–∫ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–∞—Ç–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏
- –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —à–∞–≥–æ–≤ –æ–ø—Ä–æ—Å–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
- USER - —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- SYSTEM - –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–∏—Å—Ç–µ–º—ã
- –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_404_NOT_FOUND: openapi.Response('‚ùå –ß–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω', error_response_schema)
    }
)

# =============================================================================
# MESSAGE SCHEMAS
# =============================================================================

message_create_schema = swagger_auto_schema(
    operation_description="""
# ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —á–∞—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É flow –æ–ø—Ä–æ—Å–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã –≤ —á–∞—Ç–µ
- –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ –∏ —Å–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –æ–ø—Ä–æ—Å–∞ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã:**
- üéØ –ù–∞ USER —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –≤–æ–ø—Ä–æ—Å–æ–º
- üìù –ö–æ–≥–¥–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ–π–¥–µ–Ω—ã - —Å–æ–∑–¥–∞—é—Ç—Å—è PromptParameters
- üîÑ Flow —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 17 —à–∞–≥–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è ID —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Å–æ–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        required=['chat', 'content'],
        properties={
            'chat': openapi.Schema(type=openapi.TYPE_STRING, description='UUID —á–∞—Ç–∞', example='123e4567-e89b-12d3-a456-426614174000'),
            'content': openapi.Schema(type=openapi.TYPE_STRING, description='–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è', example='–ú–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å'),
            'messageType': openapi.Schema(type=openapi.TYPE_STRING, description='USER or SYSTEM (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é USER)', example='USER', enum=['USER', 'SYSTEM']),
        }
    ),
    responses={
        status.HTTP_201_CREATED: openapi.Response('‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ, –≤–æ–∑–º–æ–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â—ë–Ω system_message', openapi.Schema(
            type=openapi.TYPE_OBJECT,
            properties={
                'status': openapi.Schema(type=openapi.TYPE_STRING),
                'message': openapi.Schema(type=openapi.TYPE_STRING),
                'data': openapi.Schema(
                    type=openapi.TYPE_OBJECT,
                    properties={
                        'user_message': openapi.Schema(type=openapi.TYPE_OBJECT, description='–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'),
                        'system_message': openapi.Schema(type=openapi.TYPE_OBJECT, description='–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å —Å–∏—Å—Ç–µ–º—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)')
                    }
                )
            }
        )),
        status.HTTP_400_BAD_REQUEST: openapi.Response('‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏', error_response_schema)
    }
)

# =============================================================================
# PROMPT SCHEMAS
# =============================================================================

prompt_assemble_schema = swagger_auto_schema(
    operation_description="""
# üß© –°–±–æ—Ä–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –ë–µ—Ä–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞)
- –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —à–∞–±–ª–æ–Ω –ø—Ä–æ–º–ø—Ç–∞
- –û–±–æ–≥–∞—â–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ–∫—Å—Ç—ã —á–µ—Ä–µ–∑ GigaChat (–∑–∞–≥–ª—É—à–∫–∞)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–±–æ—Ä–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–∞—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- –î–ª—è —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–º–ø—Ç–∞ —Å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- –ü–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–º–ø—Ç–∞

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- üìÇ prompt_parameters_id - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ —á–∞—Ç–∞
- ‚úèÔ∏è parameters - –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ä—É—á–Ω—É—é –≤ JSON
- üéØ template_id - —É–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π)

**–û–±–æ–≥–∞—â–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞:**
- –ö–æ—Ä–æ—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏–¥–µ–∏ –∏ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ª—É—á—à–∞—é—Ç—Å—è
- –ü–æ–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞, –ø–æ–∑–∂–µ - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GigaChat
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        properties={
            'prompt_parameters_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤', example='123e4567-e89b-12d3-a456-426614174000'),
            'parameters': openapi.Schema(
                type=openapi.TYPE_OBJECT, 
                description='–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–º–ø—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON',
                example={
                    'content_type': '—Ñ–æ—Ç–æ',
                    'idea': '–≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ —Ç–µ–∞—Ç—Ä–µ',
                    'emotion': '—ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π',
                    'visual_style': '–∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π',
                    'platform': 'Instagram'
                }
            ),
            'template_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)', example='123e4567-e89b-12d3-a456-426614174000'),
        }
    ),
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –ü—Ä–æ–º–ø—Ç —Å–æ–±—Ä–∞–Ω', openapi.Schema(
            type=openapi.TYPE_OBJECT,
            properties={
                'status': openapi.Schema(type=openapi.TYPE_STRING),
                'message': openapi.Schema(type=openapi.TYPE_STRING),
                'data': openapi.Schema(
                    type=openapi.TYPE_OBJECT,
                    properties={
                        'assembled_prompt': openapi.Schema(type=openapi.TYPE_STRING, description='–ì–æ—Ç–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'),
                        'history_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤')
                    }
                )
            }
        )),
        status.HTTP_400_BAD_REQUEST: openapi.Response('‚ùå –û—à–∏–±–∫–∞ / –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞', error_response_schema)
    }
)

prompt_generate_schema = swagger_auto_schema(
    operation_description="""
# üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–µ—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω –≥–æ—Ç–æ–≤—ã–π)
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
- –í—ã–ø–æ–ª–Ω—è–µ—Ç multiple attempts —Å quality check
- –ü—Ä–∏ –Ω–µ—É–¥–∞—á–µ - –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫—É
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç URL —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ —Å–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ü—Ä–∏ —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (MVP):**
1. üîÑ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–º–ø—Ç–∞ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Kandinsky (–∑–∞–≥–ª—É—à–∫–∞ - —Å–∏–º—É–ª—è—Ü–∏—è)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
4. üîÅ –ü—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ - –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
5. üì¶ –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–ª–∏ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏:**
- max_attempts - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–æ–≤—ã–µ
- Quality check –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–ª–∏–Ω—É –ø—Ä–æ–º–ø—Ç–∞ –∏ –±–∞–∑–æ–≤—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
""",
    request_body=openapi.Schema(
        type=openapi.TYPE_OBJECT,
        properties={
            'prompt_parameters_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤', example='123e4567-e89b-12d3-a456-426614174000'),
            'parameters': openapi.Schema(
                type=openapi.TYPE_OBJECT, 
                description='–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–º–ø—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON',
                example={
                    'content_type': '—Ñ–æ—Ç–æ',
                    'idea': '–≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ —Ç–µ–∞—Ç—Ä–µ',
                    'emotion': '—ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π',
                    'visual_style': '–∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω—ã–π',
                    'platform': 'Instagram',
                    'aspect_ratio': '1:1',
                    'color_palette': '—Ç—ë–ø–ª—ã–µ —Ç–æ–Ω–∞'
                }
            ),
            'template_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)', example='123e4567-e89b-12d3-a456-426614174000'),
            'max_attempts': openapi.Schema(type=openapi.TYPE_INTEGER, description='–ß–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ quality-check', default=3, example=3),
        }
    ),
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞', openapi.Schema(
            type=openapi.TYPE_OBJECT,
            properties={
                'status': openapi.Schema(type=openapi.TYPE_STRING),
                'message': openapi.Schema(type=openapi.TYPE_STRING),
                'data': openapi.Schema(
                    type=openapi.TYPE_OBJECT,
                    properties={
                        'task_id': openapi.Schema(type=openapi.TYPE_STRING, description='ID –∑–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏'),
                        'result_url': openapi.Schema(type=openapi.TYPE_STRING, description='URL —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞')
                    }
                )
            }
        )),
        status.HTTP_500_INTERNAL_SERVER_ERROR: openapi.Response('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –ø–æ–ø—ã—Ç–æ–∫', error_response_schema)
    }
)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
prompt_template_list_schema = swagger_auto_schema(
    operation_description="""
# üìã –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –≤—ã–±–æ—Ä–∞ —à–∞–±–ª–æ–Ω–∞ –ø—Ä–∏ —Ä—É—á–Ω–æ–π —Å–±–æ—Ä–∫–µ –ø—Ä–æ–º–ø—Ç–∞
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏
- –ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', error_response_schema)
    }
)

prompt_parameters_list_schema = swagger_auto_schema(
    operation_description="""
# üìä –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤
    
**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å:**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —á–∞—Ç–æ–≤
- –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –ø—Ä–æ—à–ª—ã—Ö —á–∞—Ç–æ–≤
- –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
""",
    responses={
        status.HTTP_200_OK: openapi.Response('‚úÖ –£—Å–ø–µ—à–Ω–æ', success_response_schema),
        status.HTTP_401_UNAUTHORIZED: openapi.Response('‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', error_response_schema)
    }
)